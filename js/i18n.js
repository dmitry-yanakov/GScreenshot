const translations = {
    en: {
        "hero-title": 'Privacy -<br><span class="text-gradient">Owned by You.</span>',
        "hero-desc": "Capture, edit, and store screenshots securely on your Google Drive. Direct upload with no middlemen.",
        "sec-title": "Why is it safe?",
        "sec-desc": "Your screenshot is sent directly to your personal Google Drive storage",
        "sec-pc": "Your PC",
        "sec-direct": "Direct API Upload",
        "sec-first-info": "No intermediaries",
        "sec-first-desc": "Data never touches our servers. Files are sent via official API straight to your Drive",
        "sec-second-info": "Full control",
        "sec-second-desc": "You are the sole owner of your files. Manage access rights and delete shots at any time.",
        "tools-title": "Toolkit",
        "tools-name-pencil": "Pencil",
        "tools-desc-pencil": "Freehand drawing. Perfect for quick notes or highlighting custom areas.",
        "tools-name-arrow": "Arrow",
        "tools-desc-arrow": "Point to what matters. Smart arrows that look professional and sharp.",
        "tools-name-blur": "Blur",
        "tools-desc-blur": "Protect privacy. Mask passwords, faces, or sensitive data in one click.",
        "tools-name-highlight": "Highlight",
        "tools-desc-highlight": "Focus attention. Marker effect to emphasize important text or buttons.",
        "tools-name-text": "Text",
        "tools-desc-text": "Add explanations. Type text directly on your screenshot with font options.",
        "tools-name-underline": "Underline",
        "tools-desc-underline": "Underline the essence. Quickly highlight lines of text without extra noise.",
        "join-title": "Join us",
        "join-desc": "Be part of something bigger. Protect your privacy and take control of your screenshots.",
        "footer-slogan": "Your drive, your rules."
    },
    ua: {
        "hero-title": 'Приватність -<br><span class="text-gradient">Належить Вам.</span>',
        "hero-desc": "Робіть знімки, редагуйте та зберігайте їх у безпеці на своєму Google Drive. Пряме завантаження без посередників.",
        "sec-title": "Чому це безпечно?",
        "sec-desc": "Ваш скріншот надсилається напряму у ваше особисте сховище Google Drive",
        "sec-pc": "Ваш ПК",
        "sec-direct": "Пряме завантаження через API",
        "sec-first-info": "Жодних посередників",
        "sec-first-desc": "Дані не потрапляють на наші сервери. Файл надсилається через офіційний API одразу на ваш Диск",
        "sec-second-info": "Повний контроль",
        "sec-second-desc": "Ви — єдиний власник файлів. Керуйте правами доступу та видаляйте знімки в будь-який момент.",
        "tools-title": "Набір інструментів",
        "tools-name-pencil": "Олівець",
        "tools-desc-pencil": "Малюйте від руки. Ідеально для швидких нотаток або виділення довільних областей.",
        "tools-name-arrow": "Стрілка",
        "tools-desc-arrow": "Вказуйте на важливе. Розумні стрілки, що виглядають професійно та чітко.",
        "tools-name-blur": "Розмиття",
        "tools-desc-blur": "Приховуйте конфіденційність. Замазуйте паролі, обличчя або особисті дані в один клік.",
        "tools-name-highlight": "Виділення",
        "tools-desc-highlight": "Акцентуйте увагу. Ефект маркера для виділення важливого тексту або кнопок.",
        "tools-name-text": "Текст",
        "tools-desc-text": "Додавайте пояснення. Друкуйте текст прямо поверх скріншота з вибором шрифту.",
        "tools-name-underline": "Підкреслення",
        "tools-desc-underline": "Підкреслюйте суть. Швидке виділення рядків тексту без зайвого шуму.",
        "join-title": "Приєднуйтесь до нас",
        "join-desc": "Стань частиною чогось більшого. Захисти свою приватність та візьми під контроль свої скріншоти.",
        "footer-slogan": "Ваш диск, ваші правила."
    },
    ru: {
        "hero-title": 'Безопасность -<br><span class="text-gradient">принадлежит Вам.</span>',
        "hero-desc": "Делайте снимки, редактируйте и храните их в безопасности на своем Google Drive. Прямая загрузка без посредников.",
        "sec-title": "Почему это безопасно?",
        "sec-desc": "Ваш скриншот отправляется напрямую в ваше личное хранилище Google Drive",
        "sec-pc": "Ваш ПК",
        "sec-direct": "Прямая загрузка по API",
        "sec-first-info": "Никаких посредников",
        "sec-first-desc": "Данные не посещают наши серверы. Файл отправляется через официальный API сразу на ваш Диск",
        "sec-second-info": "Полный контроль",
        "sec-second-desc": "Вы — единственный владелец файлов. Управляйте правами доступа и удаляйте снимки в любой момент.",
        "tools-title": "Набор инструментов",
        "tools-name-pencil": "Карандаш",
        "tools-desc-pencil": "Рисуйте от руки. Идеально для быстрых пометок или выделения произвольных областей.",
        "tools-name-arrow": "Стрелка",
        "tools-desc-arrow": "Указывайте на важное. Умные стрелки, которые выглядят профессионально и четко.",
        "tools-name-blur": "Размытие",
        "tools-desc-blur": "Скрывайте конфиденциальность. Замазывайте пароли, лица или личные данные в один клик.",
        "tools-name-highlight": "Выделение",
        "tools-desc-highlight": "Акцентируйте внимание. Эффект маркера для выделения важного текста или кнопок.",
        "tools-name-text": "Текст",
        "tools-desc-text": "Добавляйте пояснения. Печатайте текст прямо поверх скриншота с выбором шрифта.",
        "tools-name-underline": "Подчеркивание",
        "tools-desc-underline": "Подчеркивайте суть. Быстрое выделение строк текста без лишнего шума.",
        "join-title": "Присоединяйтесь к нам",
        "join-desc": "Стань частью чего-то большего. Защитите свою приватность и возьмите под контроль свои скриншоты.",
        "footer-slogan": "Ваш диск, ваши правила."
    }
};

// Функция смены языка
function setLanguage(lang) {
    const translation = translations[lang];
    if (!translation) return;

    // 1. Обновляем все элементы по ID
    Object.keys(translation).forEach(key => {
        const element = document.getElementById(key);
        if (element) {
            element.innerHTML = translation[key];
        }
    });

    // 2. Сохраняем выбор
    localStorage.setItem('preferredLang', lang);
    
    // 3. Обновляем футер (Текст + Копирайт + Год)
    const sloganElement = document.getElementById('footer-slogan');
    if (sloganElement) {
        const year = new Date().getFullYear();
        const text = translation['footer-slogan'];
        sloganElement.innerHTML = `${text} <span class="ms-1">© ${year}</span> <b>GScreenshot.</b>`;
    }

    // 4. Обновляем визуальное состояние кастомного селекта
    const currentLangText = document.getElementById('current-lang');
    if (currentLangText) {
        // Берем первые 3 буквы для кнопки (Eng, Рус, Укр)
        const labels = { en: 'Eng', ru: 'Рус', ua: 'Укр' };
        currentLangText.textContent = labels[lang] || lang.toUpperCase();
    }
}

// Логика работы кастомного селекта
document.addEventListener('DOMContentLoaded', () => {
    const wrapper = document.getElementById('customLangSelector');
    const trigger = wrapper?.querySelector('.select-trigger');
    const options = wrapper?.querySelectorAll('.option');

    if (trigger) {
        // Открытие/закрытие списка
        trigger.addEventListener('click', (e) => {
            wrapper.classList.toggle('active');
            e.stopPropagation();
        });
    }

    if (options) {
        // Клик по пункту меню
        options.forEach(option => {
            option.addEventListener('click', function() {
                const selectedLang = this.getAttribute('data-value');
                setLanguage(selectedLang);
                wrapper.classList.remove('active');
            });
        });
    }

    // Закрытие при клике в любое другое место
    document.addEventListener('click', () => {
        wrapper?.classList.remove('active');
    });

    // Инициализация языка при загрузке
    const savedLang = localStorage.getItem('preferredLang') || 'en';
    setLanguage(savedLang);
});